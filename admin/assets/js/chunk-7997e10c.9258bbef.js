(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7997e10c"],{a9a3:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-main"},[a("div",{staticClass:"header"},[a("el-row",[a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.getNoticeList}})],1),a("el-col",{attrs:{span:1}},[a("span",[e._v("id:")])]),a("el-col",{attrs:{span:2}},[a("el-input",{attrs:{placeholder:"请输入id"},model:{value:e.reqData.id,callback:function(t){e.$set(e.reqData,"id",t)},expression:"reqData.id"}})],1),a("el-col",{attrs:{offset:2,span:2}},[a("span",[e._v("标题:")])]),a("el-col",{attrs:{span:2}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.reqData.title,callback:function(t){e.$set(e.reqData,"title",t)},expression:"reqData.title"}})],1),a("el-col",{attrs:{offset:9,span:4}},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},nativeOn:{click:function(t){return t.stopPropagation(),e.restReqdata(t)}}},[e._v("重置")]),a("el-button",{attrs:{size:"small",type:"primary",plain:""},nativeOn:{click:function(t){return t.stopPropagation(),e.searchReqdata(t)}}},[e._v("搜索")]),a("el-button",{attrs:{size:"small",type:"primary",plain:""},nativeOn:{click:function(t){return t.stopPropagation(),e.newProject(t)}}},[e._v("新建")])],1)],1)],1),a("div",{staticClass:"notice-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,width:"100%",size:"medium"}},[a("el-table-column",{attrs:{label:"ID",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.id))])]}}])}),a("el-table-column",{attrs:{label:"作者",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.author))])]}}])}),a("el-table-column",{attrs:{label:"标题",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.title))])]}}])}),a("el-table-column",{attrs:{label:"发布时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.createtime)))])]}}])}),a("el-table-column",{attrs:{label:"修改时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.parseTime(t.row.updatetime)))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"230",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticClass:"btns"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return e.handleDetail(t.$index,t.row)}}},[e._v("详情")]),a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])],1)}}])})],1),a("el-pagination",{attrs:{"current-page":e.reqData.pageNo,layout:"prev, pager, next",total:e.reqData.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.reqData,"pageNo",t)},"update:current-page":function(t){return e.$set(e.reqData,"pageNo",t)}}})],1),a("el-dialog",{attrs:{title:e.newflag?"新增公告":"公告详情","show-close":"",top:"20px","close-on-press-escape":"",visible:e.dialogVisible,width:"80%",center:""},on:{close:e.closeDialog,"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{disabled:e.disabled,model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"公告标题",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入公告标题"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发布作者",prop:"author"}},[a("el-input",{attrs:{placeholder:"请输入发布作者"},model:{value:e.ruleForm.author,callback:function(t){e.$set(e.ruleForm,"author",t)},expression:"ruleForm.author"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"公告类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择类型"},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"公告封面",prop:"cover"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.defaultUrl,"show-file-list":!1,"on-success":e.handleCoverSuccess,"before-upload":e.beforeUploadCover}},[e.ruleForm.cover?a("img",{staticClass:"avatar",attrs:{src:e.ruleForm.cover}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"公告详情",prop:"detail"}},[a("vue-editor",{attrs:{id:"editor",useCustomImageHandler:"",disabled:e.disabled},on:{"image-added":e.handleImageAdded},model:{value:e.ruleForm.detail,callback:function(t){e.$set(e.ruleForm,"detail",t)},expression:"ruleForm.detail"}})],1)],1)],1),a("el-form-item",[e.newflag?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即创建")]):a("el-button",{attrs:{type:"primary"},on:{click:e.handleUpdate}},[e._v("保存")]),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)],1)},n=[],o=(a("d3b7"),a("e25e"),a("96cf"),a("ade3")),i=a("ed08"),s=a("91b6"),l=a("b775");function c(e){return Object(l["a"])({url:"/save/notice",method:"post",data:e})}function u(e){return Object(l["a"])({url:"/notice/list",method:"post",data:e})}function d(e,t){return Object(l["a"])({url:"/notice/".concat(t),method:"post",data:e})}function m(e,t){return Object(l["a"])({url:"/delete/notice/".concat(t),data:e,method:"post"})}function p(e,t){return Object(l["a"])({url:"/update/notice/".concat(t),data:e,method:"post"})}var h=a("5873"),g=function(){return a.e("chunk-372f0d5a").then(a.bind(null,"a060"))},f={name:"home",data:function(){var e;return{socket:null,videoFlag:!1,videoUploadPercent:0,defaultUrl:"",loading:!1,newflag:!1,disabled:!1,options:[{name:"未发布",value:1},{name:"已发布",value:2}],reqData:(e={title:"",author:"",detail:"",id:""},Object(o["a"])(e,"title",""),Object(o["a"])(e,"createtime",""),Object(o["a"])(e,"pageNo",1),Object(o["a"])(e,"pageSize",10),Object(o["a"])(e,"count",0),e),ruleForm:{title:"",author:"",detail:"",id:"",video:"",type:"",cover:""},rules:{title:[{required:!0,message:"请输入公告名称",trigger:"blur"}],author:[{required:!0,message:"请输入公告作者",trigger:"blur"}],type:[{required:!0,message:"请选择公告类型",trigger:"blur"}],cover:[{required:!0,message:"请上传公告图片",trigger:"blur"}],detail:[{required:!0,message:"请输入公告详情",trigger:"blur"}]},dialogVisible:!1,content:"",tableData:[]}},created:function(){this.getNoticeList(),this.defaultUrl=s["a"]},methods:{handleCoverSuccess:function(e,t){console.log(e),console.log(t),this.ruleForm.cover=e.data.url,console.log("上传成功,打印封面地址"),console.log(this.ruleForm.cover)},beforeUploadCover:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},clearForm:function(){var e;this.reqData.id="",this.reqData.title="",this.reqData.author="",this.reqData.title="",this.reqData.createtime="",this.ruleForm=(e={title:"",author:"",detail:"",id:""},Object(o["a"])(e,"title",""),Object(o["a"])(e,"createtime",""),Object(o["a"])(e,"videoo",""),e)},parseTime:i["a"],handleUpdate:function(){this.updateNotice(this.ruleForm,this.ruleForm.id)},handleSizeChange:function(e){this.reqData.pageSize=e,this.getNoticeList(),console.log("每页 ".concat(e," 条"))},handleCurrentChange:function(e){this.reqData.pageNo=e,this.getNoticeList(),console.log("当前页: ".concat(e))},handleEdit:function(e,t){this.disabled=!1,this.dialogVisible=!0,this.noticeDetail(t.id)},handleDelete:function(e,t){var a=this,r=this;console.log("删除"),this.ruleForm={},this.$confirm("此操作将删除该公告, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){r.deleteNotice(t.id)})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},updateNotice:function(e,t){var a;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return a=this,r.next=3,regeneratorRuntime.awrap(p(e,t).then((function(e){e.data.success?(a.$message({type:"success",message:e.data.msg}),a.dialogVisible=!1,a.getNoticeList()):a.$message({type:"error",message:e.data.msg})})));case 3:case"end":return r.stop()}}),null,this)},deleteNotice:function(e){var t,a;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return t={id:e},a=this,r.next=4,regeneratorRuntime.awrap(m(t,e).then((function(e){e.data.success?(a.$message({type:"success",message:e.data.msg}),a.getNoticeList()):a.$message({type:"error",message:e.data.msg})})));case 4:case"end":return r.stop()}}),null,this)},noticeDetail:function(e){var t,a;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return t={id:e},a=this,r.next=4,regeneratorRuntime.awrap(d(t,e).then((function(e){e.data.success&&(a.ruleForm=e.data.data,a.ruleForm.createtime=a.parseTime(a.ruleForm.createtime),a.ruleForm.updatetime=a.parseTime(a.ruleForm.updatetime),console.log(a.ruleForm))})));case 4:case"end":return r.stop()}}),null,this)},handleDetail:function(e,t){this.dialogVisible=!0,this.disabled=!0,console.log(t),this.noticeDetail(t.id)},getNoticeList:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,e.loading=!0,this.reqData.createtime=Object(i["a"])(this.reqData.createtime),t.next=5,regeneratorRuntime.awrap(u(this.reqData).then((function(t){t.data.success?(e.tableData=t.data.list,e.loading=!1,e.reqData.count=parseInt(t.data.pageCount),console.log(e.reqData)):e.$message({type:"success",message:t.data.msg,duration:1500})})).catch((function(){e.loading=!1})));case 5:case"end":return t.stop()}}),null,this)},newNotice:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,t.next=3,regeneratorRuntime.awrap(c(this.ruleForm).then((function(t){console.log(t.data),t.data.success?(e.dialogVisible=!1,e.getNoticeList(),e.$message({type:"success",message:t.data.msg,duration:1500})):e.$message({type:"error",message:t.data.msg,duration:1500})})));case 3:case"end":return t.stop()}}),null,this)},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.newNotice()}))},resetForm:function(e){this.$refs[e].resetFields()},handleChange:function(e){console.log("打印子组件传递的"),console.log(e)},newProject:function(){this.clearForm(),this.dialogVisible=!0,this.newflag=!0},findProject:function(){console.log(this.reqData),this.getNoticeList()},restProject:function(){this.clearForm()},closeDialog:function(){this.disabled=!1,this.dialogVisible=!1,this.newflag=!1,this.clearForm(),console.log("调用关闭")},handleImageAdded:function(e,t,a,r){var n;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return this,n=new FormData,n.append("file",e),o.next=5,regeneratorRuntime.awrap(s["b"](n).then((function(e){var n=e.data;console.log(n);var o=e.data.url;t.insertEmbed(a,"image",o),r()})));case 5:case"end":return o.stop()}}),null,this)}},components:{VueEditor:h["a"],searchBtns:g}},b=f,v=(a("e5d8"),a("2877")),w=Object(v["a"])(b,r,n,!1,null,"a50367a2",null);t["default"]=w.exports},ade3:function(e,t,a){"use strict";function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return r}))},ccde:function(e,t,a){},e5d8:function(e,t,a){"use strict";var r=a("ccde"),n=a.n(r);n.a}}]);
//# sourceMappingURL=chunk-7997e10c.9258bbef.js.map